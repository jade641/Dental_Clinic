@page "/forgot-password"
@using Dental_Clinic.Services
@using Dental_Clinic.Models

<link href="css/ForgotPass.css" rel="stylesheet" />

<div class="auth-container">
    <!-- Left Section -->
    <div class="left-section">
        <div class="clinic-branding">
            <div class="logo-container">
                <img src="css/bootstrap/Dental_Logo.png" alt="Aurelia Dental Clinic" class="clinic-logo" />
            </div>
            <h1 class="clinic-title">AURELIA DENTAL CLINIC - DR JADE</h1>
            <p class="clinic-tagline">YOUR SMILE. OUR MASTERPIECE</p>
        </div>

        <div class="hero-section">
            <h2 class="hero-title">Reset Your <span class="highlight-text">Password</span></h2>
            <p class="hero-subtitle">Enter your email to receive a password reset link</p>
            <p class="hero-description">
                Don't worry! It happens. Enter your email address and we'll send you a link to reset your password.
            </p>
        </div>

        <div class="stats-section">
            <div class="stat-item">
                <div class="stat-value">500+</div>
                <div class="stat-label">Happy Patients</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">15+</div>
                <div class="stat-label">Years Experience</div>
            </div>
        </div>
    </div>

    <!-- Right Section -->
    <div class="right-section">
        <div class="auth-card">
            @if (!emailSent)
            {
                <!-- Form Header -->
                <div class="form-header">
                    <h3>Forgot Password?</h3>
                    <p>No worries, we'll send you reset instructions</p>
                </div>

                @if (!string.IsNullOrEmpty(errorMessage))
                {
                    <div class="error-message">@errorMessage</div>
                }

                <EditForm Model="@forgotPasswordModel" OnValidSubmit="@HandleForgotPassword">
                    <DataAnnotationsValidator />

                    <div class="input-field">
                        <label for="email">Email Address</label>
                        <div class="input-with-icon">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                                <polyline points="22,6 12,13 2,6" />
                            </svg>
                            <InputText id="email" @bind-Value="forgotPasswordModel.Email" placeholder="your.email@example.com" />
                        </div>
                        <ValidationMessage For="@(() => forgotPasswordModel.Email)" />
                    </div>

                    <button type="submit" class="primary-btn" disabled="@isLoading">
                        @if (isLoading)
                        {
                            <span class="loading-spinner"></span>
                            <span>Sending...</span>
                        }
                        else
                        {
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                                <polyline points="22,6 12,13 2,6" />
                            </svg>
                            <span>Send Reset Link</span>
                        }
                    </button>
                </EditForm>

                <div class="divider">
                    <span>Remember your password?</span>
                </div>

                <button class="btn-secondary" @onclick="BackToLogin">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7" />
                    </svg>
                    Back to Login
                </button>
            }
            else
            {
                <!-- Success State -->
                <div class="success-container">
                    <div class="success-icon">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="32" cy="32" r="30" fill="#10b981" opacity="0.1"/>
                            <circle cx="32" cy="32" r="24" stroke="#10b981" stroke-width="3"/>
                            <path d="M22 32L28 38L42 24" stroke="#10b981" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="form-header">
                        <h3>Check Your Email</h3>
                        <p>We've sent a password reset link to <strong>@forgotPasswordModel.Email</strong></p>
                    </div>
                    <p class="success-description">
                        Click the link in the email to reset your password. The link will expire in 1 hour.
                    </p>
                    <button class="btn-secondary" @onclick="BackToLogin">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7" />
                        </svg>
                        Back to Login
                    </button>
                </div>
            }
        </div>
    </div>
</div>

